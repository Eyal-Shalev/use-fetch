{"version":3,"sources":["data.ts","About.js","Posts.tsx","Users.js","Albums.js","Comments.js","Post.tsx","Demo.js","App.js","index.js","../../lib/index.js"],"names":["baseUrl","UsersContext","createContext","WithUsers","children","props","value","useJson","users","loading","exception","useUsers","React","Provider","PostsContext","WithPosts","user","id","posts","usePosts","About","readme","useText","ref","useRef","useEffect","current","Prism","highlightAllUnder","Container","source","Posts","as","Nav","key","className","variant","map","post","to","activeClassName","NavLink","Link","title","Users","useContext","name","username","style","display","address","JSON","stringify","phone","href","website","company","Albums","Comments","comments","useComments","useState","show","setShow","length","ListGroup","comment","ListGroupItem","body","email","Post","useParams","activePost","setActivePost","find","parseInt","Card","marginLeft","Header","Title","Body","Text","Footer","userId","callback","withUser","Demo","fluid","Row","path","exact","App","basename","process","Navbar","expand","bg","sticky","NavbarBrand","NavbarToggle","NavbarCollapse","NavItem","ReactDOM","render","document","getElementById","__extends","this","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","defineProperty","exports","react_1","require","ResponseError","_super","response","_this","call","statusText","status","toString","Error","captureStackTrace","throwIfNotOk","useFetch","url","args","dependencies","_a","setResponse","_b","setLoading","_c","setException","fetch","then","catch","finally","make","k","init0","init","fetchException","setValue","x","useBlob","default"],"mappings":"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","file":"static/js/main.b840ff03.chunk.js","sourcesContent":["import {useJson, useText} from \"@eyalsh/use-fetch\";\r\nimport * as React from \"react\";\r\nimport {createContext, ReactNode} from \"react\";\r\n\r\nexport const baseUrl = 'https://jsonplaceholder.typicode.com';\r\n\r\nexport type Address = {\r\n  street: string\r\n  suite: string\r\n  city: string\r\n  zipcode: string\r\n  geo: {\r\n    lat: number\r\n    lng: number\r\n  }\r\n}\r\n\r\nexport type Company = {\r\n  name: string\r\n  catchPhrase: string\r\n  bs: string\r\n}\r\n\r\nexport type User = {\r\n  id: number\r\n  name: string\r\n  username: string\r\n  address: Address\r\n  phone: string\r\n  website: string\r\n  company: Company\r\n}\r\n\r\n\r\nexport const UsersContext = createContext<User[]>([]);\r\nexport const useUsers = () => {\r\n  const {value: users, loading, exception} = useJson<User[]>(`${baseUrl}/users`, {}, []);\r\n\r\n  return {users, loading, exception}\r\n};\r\nexport const WithUsers = ({children, ...props}: {children?:ReactNode[]}) => {\r\n  const {users: value} = useUsers();\r\n\r\n  return React.createElement(UsersContext.Provider, {value, ...props}, children)\r\n};\r\n\r\nexport type Post = {\r\n  id: number\r\n  userId: number\r\n  title: string\r\n  body: string\r\n}\r\n\r\nexport const PostsContext = createContext<Post[]>([]);\r\nexport const usePosts = (user?: User) => {\r\n  const {value: posts, loading, exception} = useJson<Post[]>(`${baseUrl}/posts?` + (user ? `userId=${user.id}` : ''), {}, []);\r\n\r\n  return {posts, loading, exception}\r\n};\r\nexport const WithPosts = ({children, ...props}: {children?:ReactNode[]}) => {\r\n  const {posts: value} = usePosts();\r\n\r\n  return React.createElement(PostsContext.Provider, {value, ...props}, children)\r\n};\r\n\r\nexport type Comment = {\r\n  id: number\r\n  postId: number\r\n  name: string\r\n  email: string\r\n  body: string\r\n}\r\n\r\nexport const useComments = (post?: Post) => {\r\n  const {value: comments, loading, exception} = useJson<Comment[]>(`${baseUrl}/comments?` + (post ? `postId=${post.id}` : ''), {}, []);\r\n\r\n  return {comments, loading, exception};\r\n};\r\n\r\nexport const useReadme = () => useText('https://raw.githubusercontent.com/Eyal-Shalev/use-fetch/master/README.md');\r\n","import React, {useEffect, useRef} from 'react';\r\nimport {useReadme} from \"./data\";\r\nimport ReactMarkdown from \"react-markdown\";\r\nimport Prism from 'prismjs'\r\nimport 'prismjs/themes/prism-okaidia.css'\r\nimport Container from \"react-bootstrap/Container\";\r\n\r\nexport const About = () => {\r\n  const {value: readme} = useReadme();\r\n  const ref = useRef();\r\n\r\n  useEffect(() => {\r\n    if (!ref.current) return;\r\n    Prism.highlightAllUnder(ref.current)\r\n  }, [readme, ref]);\r\n\r\n  return (\r\n    <Container>\r\n      <div ref={ref}>\r\n        <ReactMarkdown source={readme} />\r\n      </div>\r\n    </Container>\r\n  );\r\n};\r\n","import * as React from 'react';\r\n\r\nimport {PostsContext} from \"./data\";\r\nimport {Link} from 'react-router-dom';\r\nimport {LinkContainer} from \"react-router-bootstrap\";\r\nimport Nav from \"react-bootstrap/Nav\";\r\nimport NavLink from \"react-bootstrap/NavLink\";\r\n\r\nexport const Posts = ({as, ...props}: { as: 'main' | 'aside', [k:string]: any }) => {\r\n  const posts = React.useContext(PostsContext);\r\n\r\n  props['className'] = props['className'] || '';\r\n  props['className'] += ' posts';\r\n\r\n  return React.createElement(as, props, [(\r\n    <Nav key='nav' className='flex-column' variant='pills'>\r\n      {posts.map(post => (\r\n        <LinkContainer key={post.id} to={`/demo/posts/${post.id}`} activeClassName='active'>\r\n          <NavLink as={Link} to={`/demo/posts/${post.id}`}>\r\n            {post.title}\r\n          </NavLink>\r\n        </LinkContainer>\r\n      ))}\r\n    </Nav>\r\n  )]);\r\n};\r\n","import React, {useContext} from \"react\";\r\nimport {UsersContext} from \"./data\";\r\n\r\nexport const Users = () => {\r\n  const users = useContext(UsersContext);\r\n  return (\r\n    <ul className='card-columns'>\r\n      {users.map(user => (\r\n        <li key={user.id} className='card'>\r\n          <header className='card-header'>\r\n            <h3 className='card-title'>{user.name} (<em>{user.username}</em>)</h3>\r\n          </header>\r\n          <main className='card-body'>\r\n            <details style={{display: !user.address ? 'none' : 'block'}}>\r\n              <summary>Address</summary>\r\n              <address>\r\n                <pre>{JSON.stringify(user.address, null, '\\t')}</pre>\r\n              </address>\r\n            </details>\r\n            <div style={{display: !user.phone ? 'none' : 'block'}}>\r\n              <span>Phone:</span> <a href={`tel:${user.phone}`}>{user.phone}</a>\r\n            </div>\r\n            <div style={{display: !user.website ? 'none' : 'block'}}>\r\n              <span>Website:</span> <a href={user.website}>{user.website}</a>\r\n            </div>\r\n            <details style={{display: !user.company ? 'none' : 'block'}}>\r\n              <summary>Company</summary>\r\n              <pre>{JSON.stringify(user.company, null, '\\t')}</pre>\r\n            </details>\r\n          </main>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  )\r\n};\r\n","import React from \"react\";\r\n\r\nexport const Albums = () => {\r\n  return (<span>Albums</span>)\r\n};\r\n","import React, {useEffect, useState} from \"react\";\r\nimport {useComments} from \"./data\";\r\nimport ListGroup from \"react-bootstrap/ListGroup\";\r\nimport ListGroupItem from \"react-bootstrap/ListGroupItem\";\r\n\r\nexport const Comments = ({post, ...props}) => {\r\n  const {comments} = useComments(post);\r\n  const [show, setShow] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setShow(comments.length > 0);\r\n  }, [comments]);\r\n\r\n  useEffect(() => {\r\n    setShow(false)\r\n  }, [post]);\r\n\r\n  return (\r\n    <section {...props}>\r\n      <ListGroup className={`fade ${show ? 'show' : ''}`}>\r\n        {comments.map((comment) => (\r\n          <ListGroupItem key={comment.id}>\r\n            <main>{comment.body}</main>\r\n            <footer>Commented by: <a href={comment.email}>{comment.name} &lt;{comment.email}&gt;</a></footer>\r\n          </ListGroupItem>\r\n        ))}\r\n      </ListGroup>\r\n    </section>\r\n  );\r\n};\r\n","import * as React from 'react';\r\nimport {useContext, useEffect, useState} from 'react';\r\nimport {Comments} from './Comments';\r\nimport {Link, useParams} from \"react-router-dom\";\r\nimport {Post as PostT, PostsContext, User, UsersContext} from \"./data\";\r\nimport Card from \"react-bootstrap/Card\";\r\n\r\n\r\nexport const Post = ({...props}: {[k:string]: any}) => {\r\n  const users = React.useContext(UsersContext);\r\n\r\n  const withUser = (userId: number, callback: (user: User) => any) => {\r\n    if (!users) return;\r\n    const user = users.find(({id}) => id === userId);\r\n    if (user) return callback(user)\r\n  };\r\n\r\n  const {id} = useParams();\r\n\r\n  const posts = useContext(PostsContext);\r\n\r\n  const [activePost, setActivePost] = useState<PostT>();\r\n  useEffect(() => {\r\n    if (!posts) return;\r\n    setActivePost(posts.find(post => post.id === parseInt(id || '-1')))\r\n  }, [id, posts]);\r\n\r\n  if (!activePost) {\r\n    return (<></>);\r\n  }\r\n\r\n  props['className'] = props['className'] || '';\r\n  props['className'] += ' post';\r\n\r\n  return (\r\n    <Card as='article' style={{marginLeft: '15px'}} {...props}>\r\n      <Card.Header as='header'><Card.Title>{activePost.title}</Card.Title></Card.Header>\r\n      <Card.Body as='main'>\r\n        <Card.Text>{activePost.body}</Card.Text>\r\n        <Comments post={activePost} />\r\n      </Card.Body>\r\n      <Card.Footer as='footer'>\r\n        {withUser(activePost.userId, (user: User) => (\r\n          <header>Authored by <Link to={`/demo/users/${user.id}`}>{user.name}</Link></header>\r\n        ))}\r\n      </Card.Footer>\r\n    </Card>\r\n  )\r\n};\r\n","import React from 'react';\r\nimport {\r\n  Switch,\r\n  Route,\r\n  Redirect,\r\n  Link,\r\n} from 'react-router-dom';\r\n\r\nimport {WithPosts, WithUsers} from \"./data\";\r\nimport {Posts} from \"./Posts\";\r\nimport {Users} from \"./Users\";\r\nimport {Albums} from \"./Albums\";\r\nimport {LinkContainer} from \"react-router-bootstrap\";\r\nimport {Post} from \"./Post\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Nav from \"react-bootstrap/Nav\";\r\nimport Container from \"react-bootstrap/Container\";\r\n\r\nexport const Demo = (props) => {\r\n  return (\r\n    <WithUsers>\r\n      <WithPosts>\r\n        <Container fluid={true}>\r\n          <Row>\r\n            <aside className='col-md-1'>\r\n              <Nav variant='pills' className='flex-column'>\r\n                <LinkContainer to='/demo/posts' activeClassName='active'>\r\n                  <Link className=\"nav-link\" to='/demo/posts'>Posts </Link>\r\n                </LinkContainer>\r\n                <LinkContainer to='/demo/albums' activeClassName='active'>\r\n                  <Link className=\"nav-link\" to=\"/demo/albums\">Albums</Link>\r\n                </LinkContainer>\r\n                <LinkContainer to='/demo/users' activeClassName='active'>\r\n                  <Link className=\"nav-link\" to=\"/demo/users\">Users</Link>\r\n                </LinkContainer>\r\n              </Nav>\r\n            </aside>\r\n            <section className='col row'>\r\n              <Switch>\r\n                <Route path='/demo/posts' exact={true}>\r\n                  <Posts as='main'/>\r\n                </Route>\r\n                <Route path='/demo/posts/:id'>\r\n                  <Posts as='aside' className='col-3'/>\r\n                  <Post className='col'/>\r\n                </Route>\r\n                <Route path='/demo/albums'>\r\n                  <Albums/>\r\n                </Route>\r\n                <Route path='/demo/users'>\r\n                  <Users/>\r\n                </Route>\r\n                <Route path='/demo'>\r\n                  <Redirect to=\"/demo/posts\"/>\r\n                </Route>\r\n              </Switch>\r\n            </section>\r\n          </Row>\r\n        </Container>\r\n      </WithPosts>\r\n    </WithUsers>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport './App.css';\r\nimport {\r\n  HashRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link,\r\n} from 'react-router-dom';\r\nimport {LinkContainer} from 'react-router-bootstrap'\r\nimport {About} from \"./About\";\r\nimport {Demo} from \"./Demo\";\r\nimport Navbar from \"react-bootstrap/Navbar\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Nav from \"react-bootstrap/Nav\";\r\nimport NavbarToggle from \"react-bootstrap/NavbarToggle\";\r\nimport NavbarCollapse from \"react-bootstrap/NavbarCollapse\";\r\nimport NavItem from \"react-bootstrap/NavItem\";\r\nimport NavLink from \"react-bootstrap/NavLink\";\r\nimport NavbarBrand from \"react-bootstrap/NavbarBrand\";\r\n// className='navbar navbar-collapse'\r\nfunction App() {\r\n  return (\r\n    <Router basename={process.env.PUBLIC_URL}>\r\n      <Navbar expand='sm' bg='dark' variant='dark' sticky='top'>\r\n        <Container>\r\n          <LinkContainer to='/' exact={true}>\r\n            <NavbarBrand as={Link} to='/'>use-fetch</NavbarBrand>\r\n          </LinkContainer>\r\n          <NavbarToggle />\r\n          <NavbarCollapse>\r\n            <Nav>\r\n              <LinkContainer exact={true} to='/' activeClassName='active'>\r\n                <NavItem>\r\n                  <NavLink as={Link} to='/'>Home</NavLink>\r\n                </NavItem>\r\n              </LinkContainer>\r\n              <LinkContainer to='/demo' activeClassName='active'>\r\n                <NavItem>\r\n                  <NavLink as={Link} to='/demo'>Demo</NavLink>\r\n                </NavItem>\r\n              </LinkContainer>\r\n              <NavItem>\r\n                <NavLink href='https://github.com/Eyal-Shalev/use-fetch'>GitHub</NavLink>\r\n              </NavItem>\r\n            </Nav>\r\n          </NavbarCollapse>\r\n        </Container>\r\n      </Navbar>\r\n      <Switch>\r\n        <Route path='/demo'>\r\n          <Demo />\r\n        </Route>\r\n        <Route path='/'>\r\n          <About />\r\n        </Route>\r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport './custom-bootstrap.scss'\n\nReactDOM.render(<App />, document.getElementById('root'));\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar react_1 = require(\"react\");\r\nvar ResponseError = (function (_super) {\r\n    __extends(ResponseError, _super);\r\n    function ResponseError(response) {\r\n        var _this = _super.call(this, response.statusText !== '' ? response.statusText : response.status.toString()) || this;\r\n        _this.response = response;\r\n        _this.name = ResponseError.name;\r\n        Error.captureStackTrace(_this, ResponseError);\r\n        return _this;\r\n    }\r\n    return ResponseError;\r\n}(Error));\r\nexports.ResponseError = ResponseError;\r\nvar throwIfNotOk = function (response) {\r\n    if (response.status !== 200) {\r\n        throw new ResponseError(response);\r\n    }\r\n    return response;\r\n};\r\nvar useFetch = function (url, args, dependencies) {\r\n    if (args === void 0) { args = {}; }\r\n    if (dependencies === void 0) { dependencies = []; }\r\n    var _a = react_1.useState(null), response = _a[0], setResponse = _a[1];\r\n    var _b = react_1.useState(false), loading = _b[0], setLoading = _b[1];\r\n    var _c = react_1.useState(null), exception = _c[0], setException = _c[1];\r\n    react_1.useEffect(function () {\r\n        if (loading)\r\n            return;\r\n        setLoading(true);\r\n        fetch(url, args)\r\n            .then(throwIfNotOk)\r\n            .then(setResponse)\r\n            .catch(setException)\r\n            .finally(function () { return setLoading(false); });\r\n    }, [url, JSON.stringify(args)]);\r\n    return { response: response, loading: loading, exception: exception };\r\n};\r\nfunction make(k, init0) {\r\n    return function (url, args, init) {\r\n        if (args === void 0) { args = {}; }\r\n        if (init === void 0) { init = init0; }\r\n        var _a = useFetch(url, args), response = _a.response, fetchException = _a.exception, loading = _a.loading;\r\n        var _b = react_1.useState(init), value = _b[0], setValue = _b[1];\r\n        var _c = react_1.useState(fetchException), exception = _c[0], setException = _c[1];\r\n        react_1.useEffect(function () { !!fetchException && setException(fetchException); }, [fetchException]);\r\n        react_1.useEffect(function () {\r\n            if (!response)\r\n                return;\r\n            response[k]().then(function (x) {\r\n                setValue(x);\r\n                setException(null);\r\n            }).catch(setException);\r\n        }, [response]);\r\n        return { value: value, loading: loading, exception: exception };\r\n    };\r\n}\r\nexports.useText = make('text', '');\r\nexports.useJson = make('json', null);\r\nexports.useBlob = make('blob', null);\r\nexports.default = useFetch;\r\n"],"sourceRoot":""}